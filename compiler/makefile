# makefile for Pawns compiler:
# just two SWI-Prolog files with compile/0 as top level pred to call
# 
# The Pawns header file which is needed everywhere included
# some code generated by adtpp
# The README.md for the dist is created using the master version
# number which is defined here
#
# Generate VERSION line with: date +'VERSION = 1.%y%m%d'
# or in vim: :/^VERSION /!date +'VERSION = 1.\%y\%m\%d'

VERSION = 1.231024

ADTPP=~/bin/adtpp

pnsc: pawns.pl comp.pl
	swipl -o pnsc -g compile -c pawns.pl comp.pl

install: pnsc
	cp pnsc ~/bin/pnsc

uninstall:
	rm ~/bin/pnsc

builtin.h: builtin.adt
	$(ADTPP) $<

README.md : README.md.src makefile
	sed s/VERSION/$(VERSION)/ < README.md.src > README.md

.PHONY: ..README
..README: README.md
	cp README.md ..

.PHONY: clean
clean:
	rm -rf pnsc tmp* Readme..

# :set noet ts=8

